<!DOCTYPE html>
<html>

  <head>
    
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>

  Jeffrey A. Chan-Santiago


  | plotbee

</title>
<meta name="description" content="Jeffrey Chan's webpage and blog.
">

<!-- Open Graph -->




<!-- Bootstrap & MDB -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" integrity="sha512-RO38pBRxYH3SoOprtPTD86JFOclM51/XTIdEPh5j8sj4tp8jmQIx26twG52UaLi//hQldfrh7e51WzP9wuP32Q==" crossorigin="anonymous" />

<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"  integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css" integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin="anonymous">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<!-- <link href="https://fonts.googleapis.com/css2?family=Koh+Santepheap&display=swap" rel="stylesheet"> -->
<!-- <link href="https://fonts.googleapis.com/css2?family=Koh+Santepheap&family=Lora&display=swap" rel="stylesheet"> -->
<link href="https://fonts.googleapis.com/css2?family=Koh+Santepheap&family=Lora:wght@400;500&display=swap" rel="stylesheet">


<!-- Code Syntax Highlighting -->
<link rel="stylesheet" href="https://gitcdn.link/repo/jwarby/jekyll-pygments-themes/master/default.css" />

<!-- Styles -->

<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22></text></svg>">

<link rel="stylesheet" href="/assets/css/main.css">
<link rel="canonical" href="/projects/plotbee/">


<!-- Dark Mode -->
<script src="/assets/js/theme.js"></script>
<script src="/assets/js/dark_mode.js"></script>



  </head>

  <body class="fixed-top-nav ">

    <!-- Header -->

    <header>
    <!-- Nav Bar -->
    <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
    <div class="container">
      
      <a class="navbar-brand title font-weight-lighter" href="https://jachansantiago.com//">
       <span class="font-weight-bold">Jeffrey</span> A.  Chan-Santiago
      </a>
      
      <!-- Navbar Toggle -->
      <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>
      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">
          <!-- About -->
          <li class="nav-item ">
            <a class="nav-link" href="/">
              about
              
            </a>
          </li>
          
          <!-- Blog -->
          <li class="nav-item ">
            <a class="nav-link" href="/blog/">
              blog
              
            </a>
          </li>
          
          <!-- Other pages -->
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/projects/">
                projects
                
              </a>
          </li>
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/publications/">
                publications
                
              </a>
          </li>
          
          
          
          
          
          
          
          
          
          
          
          
            <div class="toggle-container">
              <a id="light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
              </a>
            </div>
          
        </ul>
      </div>
    </div>
  </nav>


</header>


    <!-- Content -->

    <div class="container mt-1">
      <div class="post">

  <header class="post-header">
    <h1 class="post-title">plotbee</h1>
    <p class="post-description">Plotbee is a library to process, manage and visualize pose-based detections of bees.</p>
  </header>

  <article>
    <!-- Place this tag in your head or just before your close body tag. -->
<script async="" defer src="https://buttons.github.io/buttons.js"></script>

<!-- Place this tag where you want the button to render. -->
<p><a class="github-button" href="https://github.com/jachansantiago/plotbee" data-color-scheme="no-preference: light; light: light; dark: light;" data-size="large" aria-label="View on Github" target="_blank" rel="noopener noreferrer">View source on Github</a></p>

<!-- [Plotbee](https://github.com/jachansantiago/plotbee){:target="_blank"} -->
<p><a href="https://colab.research.google.com/drive/1lcppKrnbxGmJelXcuitNfclOW8_JdvEe?usp=sharing" target="_blank" rel="noopener noreferrer"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"></a></p>

<div class="row">
    <div class="col-sm mt-3 mt-md-0">
        <a href="https://github.com/jachansantiago/plotbee" target="_blank" rel="noopener noreferrer">
        <img class="img-fluid rounded z-depth-1" src="/assets/img/plotbee/plotbee.webp" alt="" title="Plotbee Image">
        </a>
    </div>
</div>
<div class="caption">
    Plotbee vizualization of Tracking.
</div>

<h2 id="the-data-structure">The Data Structure</h2>
<p>Plotbee has a simple data structure based on videos, frames and bodies (skeleton detections). Where a video is a list of frames and a frame contains a list of bodies.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">plotbee.video</span> <span class="kn">import</span> <span class="n">Video</span>
<span class="n">video</span> <span class="o">=</span> <span class="n">Video</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="sh">"</span><span class="s">plotbee_video_data.json</span><span class="sh">"</span><span class="p">)</span>

<span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">video</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">body</span> <span class="ow">in</span> <span class="n">frame</span><span class="p">:</span>
        <span class="k">pass</span>
</code></pre></div></div>

<p>A body is consists as set of keypoints and connections. Plotbee functionalities are centered on video and body operations such as tracking (video operation) or pollen detection (body operation). Most of the visualization are at frame and body level.</p>

<h2 id="vizualization">Vizualization</h2>

<p>The current plotbee format just store data related to keypoint detection, tracking information, pollen detection and tag detection. But do not store the image of the video. Therefore, for visualization the video file is need it.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">videoplotter</span> <span class="k">as</span> <span class="n">vplt</span>

<span class="n">video</span><span class="p">.</span><span class="nf">load_video</span><span class="p">(</span><span class="sh">"</span><span class="s">plotbee_video.mp4</span><span class="sh">"</span><span class="p">)</span>

<span class="n">frame</span> <span class="o">=</span> <span class="n">video</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">frame</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">vplt</span><span class="p">.</span><span class="nf">imshow</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
<span class="n">vplt</span><span class="p">.</span><span class="nf">imshow</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
</code></pre></div></div>

<!-- `vplt.imshow` has options to show skeletons, bounding boxes, tracking and id text.  -->

<div class="row">
    <div class="col-sm mt-3 mt-md-0">
        <!-- <a href="https://github.com/jachansantiago/plotbee"> -->
        <img class="img-fluid rounded z-depth-1" src="/assets/img/plotbee_bbox_idtext.png" alt="" title="Plotbee Image">
        <!-- </a> -->
    </div>
</div>
<div class="caption">
    <code>vplt.imshow </code> has options to show skeletons, bounding boxes, tracking and id text. 
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">vplt</span><span class="p">.</span><span class="nf">imshow</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">skeleton</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">tracks</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">idtext</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="other-processes">Other Processes</h2>

<h4 id="tracking">Tracking</h4>
<p>One of the important task to collect information about bees is tracking. The plotbee tracking is a greedy assigments of the detectecions based on distances.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">video</span><span class="p">.</span><span class="nf">hungarian_tracking</span><span class="p">()</span>
</code></pre></div></div>

<h4 id="pollen-detection">Pollen Detection</h4>
<p>Pollen detection is based on a convolutional neural network to classify if a body contains pollen. If a body contains pollen then <code class="language-plaintext highlighter-rouge">body.pollen == True</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Pollen Detection
</span><span class="n">video</span><span class="p">.</span><span class="nf">process_pollen</span><span class="p">(</span><span class="n">model_path</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span> <span class="n">workers</span><span class="o">=</span><span class="n">workers</span><span class="p">)</span>

<span class="c1"># Visualization
</span><span class="n">pollen_bees</span> <span class="o">=</span> <span class="nf">list</span><span class="p">()</span>

<span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">video</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">body</span> <span class="ow">in</span> <span class="n">frame</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">body</span><span class="p">.</span><span class="n">pollen</span><span class="p">:</span>
            <span class="n">pollen_bees</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
            
<span class="nf">shuffle</span><span class="p">(</span><span class="n">pollen_bees</span><span class="p">)</span>
<span class="n">vplt</span><span class="p">.</span><span class="nf">contact_sheet</span><span class="p">(</span><span class="n">pollen_bees</span><span class="p">[:</span><span class="mi">20</span><span class="p">])</span>
</code></pre></div></div>

<div class="row">
    <div class="col-sm mt-3 mt-md-0">
        <!-- <a href="https://github.com/jachansantiago/plotbee"> -->
        <img class="img-fluid rounded z-depth-1" src="/assets/img/pollen_bees.png" alt="" title="Plotbee Image">
        <!-- </a> -->
    </div>
</div>
<div class="caption">
    Contact sheet of bees detected with pollen. 
</div>

<h4 id="tag-detection">Tag Detection</h4>

<p>In our setup, some individuals carries a marker to be recognize in long-term monitoring. More information about this tag setup in the <a href="https://doi.org/10.1145/3359115.3359120" target="_blank" rel="noopener noreferrer">paper</a>. Plotbee includes detection of tags using an implemetation of <a href="https://github.com/AprilRobotics/apriltag" target="_blank" rel="noopener noreferrer">Apriltags</a>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Tag Detection
</span><span class="n">video</span><span class="p">.</span><span class="nf">tag_detection</span><span class="p">()</span>

<span class="c1"># Visualization
</span><span class="n">tagged_bees</span> <span class="o">=</span> <span class="n">video</span><span class="p">.</span><span class="nf">tagged</span><span class="p">()</span>

<span class="nf">shuffle</span><span class="p">(</span><span class="n">tagged_bees</span><span class="p">)</span>

<span class="n">vplt</span><span class="p">.</span><span class="nf">tagged_contact_sheet</span><span class="p">(</span><span class="n">tagged_bees</span><span class="p">[:</span><span class="mi">20</span><span class="p">])</span>
</code></pre></div></div>

<div class="row">
    <div class="col-sm mt-3 mt-md-0">
        <!-- <a href="https://github.com/jachansantiago/plotbee"> -->
        <img class="img-fluid rounded z-depth-1" src="/assets/img/tagged_bees.png" alt="" title="Plotbee Image">
        <!-- </a> -->
    </div>
</div>
<div class="caption">
    Contact sheet of bees detected with tags. 
</div>

<h3 id="conclusion">Conclusion</h3>

<p>This is just an overview of the plotbee library to show the power of this library, but there some features that are not explained here.</p>


  </article>

</div>

    </div>

    <!-- Footer -->

    
<footer class="fixed-bottom">
  <div class="container mt-0">
    Â© Copyright 2025 Jeffrey A. Chan-Santiago.
    Powered by <a href="http://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener noreferrer">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>.

    
    
  </div>
</footer>



  </body>

  <!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>

  <!-- Bootsrap & MDB scripts -->
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js" integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A==" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha512-M5KW3ztuIICmVIhjSqXe01oV2bpe248gOxqmlcYrEzAvws7Pw3z6BK0iGbrwvdrUQUhi3eXgtxp5I8PDo9YfjQ==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js" integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw==" crossorigin="anonymous"></script> -->

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>

  
<!-- Mansory & imagesLoaded -->
<script defer src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script defer src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script defer src="/assets/js/mansory.js" type="text/javascript"></script>


  


<!-- Medium Zoom JS -->
<script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
<script src="/assets/js/zoom.js"></script>


<!-- Load Common JS -->
<script src="/assets/js/common.js"></script>

  
<!-- MathJax -->
<script type="text/javascript">
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>

<script async type="text/javascript" id="MathJax-script" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js"></script>
<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>


  
<!-- Global site tag (gtag.js) - Google Analytics -->
<!-- Cookie Consent by TermsFeed (https://www.TermsFeed.com) -->
<script type="text/javascript" src="/assets/js/cookie-consent.js" charset="UTF-8"></script>
<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({"notice_banner_type":"headline","consent_type":"express","palette":"light","language":"en","page_load_consent_levels":["strictly-necessary"],"notice_banner_reject_button_hide":false,"preferences_center_close_button_hide":false,"page_refresh_confirmation_buttons":false});
});
</script>

<!-- Google Analytics -->
<script type="text/plain" cookie-consent="tracking" async src="https://www.googletagmanager.com/gtag/js?id=G-V04ZWTRLLP"></script>
<script type="text/plain" cookie-consent="tracking">
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-V04ZWTRLLP');
</script>
<!-- end of Google Analytics-->

<noscript>ePrivacy and GPDR Cookie Consent by <a href="https://www.TermsFeed.com/" rel="nofollow">TermsFeed Generator</a></noscript>
<!-- End Cookie Consent by TermsFeed (https://www.TermsFeed.com) -->






</html>
